(this.webpackJsonpmessenger2=this.webpackJsonpmessenger2||[]).push([[0],{23:function(e,s,t){},30:function(e,s,t){"use strict";t.r(s);var n=t(8),a=t.n(n),c=t(17),i=t.n(c),r=(t(23),t(18)),o=t(12),l=t(10);l.a.initializeApp({apiKey:"AIzaSyCLYkYPrXkF1uVAY19oU1aUo1OuBsrSHGI",authDomain:"messenger-53a7e.firebaseapp.com",projectId:"messenger-53a7e",storageBucket:"messenger-53a7e.appspot.com",messagingSenderId:"840593554870",appId:"1:840593554870:web:fbe8db6a7df327305e1517",measurementId:"G-R6NGR1JXZS"});var u=l.a.auth(),j=l.a.firestore(),d=t(4),m=Object(n.createContext)(),b=function(e){var s=Object(n.useState)(null),t=Object(o.a)(s,2),a=t[0],c=t[1],i=Object(n.useState)(!0),b=Object(o.a)(i,2),h=b[0],O=b[1],g=Object(n.useState)([]),p=Object(o.a)(g,2),x=p[0],v=p[1];return Object(n.useEffect)((function(){u.onAuthStateChanged((function(e){c(e),O(!1),console.log("Usr::",e)})),j.collection("messages").orderBy("currentTime","desc").onSnapshot((function(e){console.log("All msg:",e.docs),v(e.docs.map((function(e){return Object(r.a)({id:e.id},e.data())})))}))}),[]),console.log("All:",x),Object(d.jsx)(m.Provider,{value:{register:function(){var e=new l.a.auth.GoogleAuthProvider;l.a.auth().signInWithPopup(e).then((function(s){l.a.auth().signInWithRedirect(e)}))},user:a,loader:h,logout:function(){u.signOut().then((function(){c(null)}))},sendMessage:function(e){j.collection("messages").add({msg:e,photo:a.photoURL,username:a.displayName,email:a.email,currentTime:l.a.firestore.FieldValue.serverTimestamp()})},allMsg:x},children:e.children})},h=function(){var e=Object(n.useContext)(m),s=e.register,t=e.user,a=e.loader,c=e.logout,i=function(){s()},r=function(){c()};return Object(d.jsx)("div",{className:"navbar",children:Object(d.jsxs)("div",{className:"navbar__container",children:[Object(d.jsx)("div",{className:"navbar__logo",children:" Messanger"}),a?"...":t?Object(d.jsxs)("div",{className:"navbar__links",children:[Object(d.jsx)("li",{children:Object(d.jsx)("span",{className:"navbar__img",children:Object(d.jsx)("img",{src:t.photoURL,alt:"user"})})}),Object(d.jsx)("li",{children:Object(d.jsx)("button",{className:"navbar__btn",onClick:r,children:"Logout"})})," "]}):Object(d.jsx)("div",{className:"navbar__links",children:Object(d.jsx)("li",{children:Object(d.jsx)("button",{className:"navbar__btn",onClick:i,children:"Register with Google"})})})]})})},O=function(){return Object(d.jsxs)("div",{className:"welcome",children:[Object(d.jsx)("h1",{children:"Welcome to messager"}),Object(d.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore necessitatibus quos nulla deserunt error qui quia modi suscipit! Deleniti totam alias esse assumenda. Neque qui, quia impedit libero veritatis quas!"})]})},g=function(){var e=Object(n.useState)(""),s=Object(o.a)(e,2),t=s[0],a=s[1],c=Object(n.useContext)(m).sendMessage;return Object(d.jsx)("div",{className:"input__form",children:Object(d.jsx)("form",{onSubmit:function(e){e.preventDefault(),c(t),a("")},children:Object(d.jsx)("input",{type:"text",name:"",id:"",placeholder:"Write a message...",className:"input__control",value:t,onChange:function(e){return a(e.target.value)},required:!0})})})},p=function(){var e=Object(n.useContext)(m),s=e.allMsg,t=e.user;return Object(d.jsxs)("div",{className:"messages",children:[s.map((function(e){return e.email===t.email?Object(d.jsx)("div",{className:"messages__my",children:Object(d.jsx)("div",{className:"messages__my-p",children:Object(d.jsx)("p",{children:e.msg})})},e.id):Object(d.jsxs)("div",{className:"messages__other",children:[Object(d.jsx)("div",{className:"messages__other-img",children:Object(d.jsx)("img",{src:e.photo,alt:e.photo})}),Object(d.jsxs)("div",{className:"messages__other-msg",children:[Object(d.jsx)("span",{children:e.username}),Object(d.jsx)("p",{children:e.msg})]})]},e.id)})),Object(d.jsx)(g,{})]})},x=function(){var e=a.a.useContext(m),s=e.loader,t=e.user;return Object(d.jsx)("div",{children:s?"loading...":t?Object(d.jsx)(p,{}):Object(d.jsx)(O,{})})};var v=function(){return Object(d.jsxs)(b,{children:[Object(d.jsx)(h,{}),Object(d.jsx)(x,{})]})};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.7ab4dc87.chunk.js.map